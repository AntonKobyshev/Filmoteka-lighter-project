function e(e){return e&&e.__esModule?e.default:e}var i="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},a={},t=i.parcelRequired7c6;null==t&&((t=function(e){if(e in n)return n[e].exports;if(e in a){var i=a[e];delete a[e];var t={id:e,exports:{}};return n[e]=t,i.call(t.exports,t,t.exports),t.exports}var s=new Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}).register=function(e,i){a[e]=i},i.parcelRequired7c6=t);var s,r=t("lOKsE"),l=t("jAzyG"),o=t("eyjy7"),c=t("gKkQl"),d=t("fEVjq");function m(i){return i.map((({poster_path:i,title:n,name:a,release_date:t,first_air_date:r,genre_ids:l,genres:o,vote_average:c,id:d})=>{let m;return o&&(m=o.map((({name:e})=>e)).join(", ")),l&&(m=e(s).filter((({id:e})=>l.includes(e))).map((({name:e})=>e)).join(", ")),`<li class="films__item" data-id=${d}>\n                <div class="films__img">\n                <img src=https://image.tmdb.org/t/p/original${i} alt="${n||a}" loading="lazy">\n        </div>\n                <div class="films__description">\n                  <p class="films__title">${n||a}</p>\n                  <div class="films__meta">\n                    <p class="films__genres">${m||"Action"}</p>\n                    <p class="films__data">${(t||r||"2023").slice(0,4)}</p>\n                    <span class="films__rating">${c||"-"}</span>\n                  </div>\n                </div>\n            </li>`})).join("")}s=JSON.parse('[{"id":28,"name":"Action"},{"id":12,"name":"Adventure"},{"id":16,"name":"Animation"},{"id":35,"name":"Comedy"},{"id":80,"name":"Crime"},{"id":99,"name":"Documentary"},{"id":18,"name":"Drama"},{"id":10751,"name":"Family"},{"id":14,"name":"Fantasy"},{"id":36,"name":"History"},{"id":27,"name":"Horror"},{"id":10402,"name":"Music"},{"id":9648,"name":"Mystery"},{"id":10749,"name":"Romance"},{"id":878,"name":"Science Fiction"},{"id":10770,"name":"TV Movie"},{"id":53,"name":"Thriller"},{"id":10752,"name":"War"},{"id":37,"name":"Western"}]');const u=document.querySelector(".library__container-list");function f(e){u.innerHTML=m(e)}var p=t("2tZq5");const v=(0,c.initializeApp)(d.firebaseConfig),_=(0,l.getDatabase)(v),y=(0,o.getAuth)(v);new(0,p.default)({queue:{},watched:{}});const g=new(0,r.API_service),h=document.querySelector(".js-watched"),b=document.querySelector(".js-queue"),w=document.querySelector(".library__container-list");function L(){h.classList.contains("current")||((0,o.onAuthStateChanged)(y,(e=>{if(e){const i=`users/${e.uid}/lib/watched/`;(0,l.get)((0,l.ref)(_,i)).then((e=>{if(e.exists()){q(Object.keys(e.val()))}else w.innerHTML="",console.log("No data available")})).catch((e=>{console.error(e)}))}})),h.classList.add("is-active"),b.classList.remove("is-active"))}async function q(e){try{const i=e.map((async e=>(g.id=e,await g.fetchMovieById())));f(await Promise.all(i))}catch(e){console.log(e)}}b.addEventListener("click",(function(){if(b.classList.contains("is-active"))return;b.classList.add("is-active"),h.classList.remove("is-active"),(0,o.onAuthStateChanged)(y,(e=>{if(e){const i=`users/${e.uid}/lib/queue/`;(0,l.get)((0,l.ref)(_,i)).then((e=>{if(e.exists()){q(Object.keys(e.val()))}else w.innerHTML="",addErrorStyles(),console.log("No data available")})).catch((e=>{console.error(e)}))}}))})),h.addEventListener("click",L),L();
//# sourceMappingURL=library.e330a462.js.map
