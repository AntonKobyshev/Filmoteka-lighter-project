!function(){function e(e){return e&&e.__esModule?e.default:e}var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},i={},a=n.parcelRequired7c6;null==a&&((a=function(e){if(e in t)return t[e].exports;if(e in i){var n=i[e];delete i[e];var a={id:e,exports:{}};return t[e]=a,n.call(a.exports,a,a.exports),a.exports}var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(e,n){i[e]=n},n.parcelRequired7c6=a);var r,c=a("bpxeT"),s=a("2TvXO"),o=a("1ubxI"),l=a("cokon"),u=a("gQOBw"),d=a("fkNhc"),f=a("1HnB8");function m(n){return n.map((function(n){var t,i=n.poster_path,a=n.title,c=n.name,s=n.release_date,o=n.first_air_date,l=n.genre_ids,u=n.genres,d=n.vote_average,f=n.id;return u&&(t=u.map((function(e){return e.name})).join(", ")),l&&(t=e(r).filter((function(e){var n=e.id;return l.includes(n)})).map((function(e){return e.name})).join(", ")),'<li class="films__item" data-id='.concat(f,'>\n                <div class="films__img">\n                <img src=https://image.tmdb.org/t/p/original').concat(i,' alt="').concat(a||c,'" loading="lazy">\n        </div>\n                <div class="films__description">\n                  <p class="films__title">').concat(a||c,'</p>\n                  <div class="films__meta">\n                    <p class="films__genres">').concat(t||"Action",'</p>\n                    <p class="films__data">').concat((s||o||"2023").slice(0,4),'</p>\n                    <span class="films__rating">').concat(d||"-","</span>\n                  </div>\n                </div>\n            </li>")})).join("")}r=JSON.parse('[{"id":28,"name":"Action"},{"id":12,"name":"Adventure"},{"id":16,"name":"Animation"},{"id":35,"name":"Comedy"},{"id":80,"name":"Crime"},{"id":99,"name":"Documentary"},{"id":18,"name":"Drama"},{"id":10751,"name":"Family"},{"id":14,"name":"Fantasy"},{"id":36,"name":"History"},{"id":27,"name":"Horror"},{"id":10402,"name":"Music"},{"id":9648,"name":"Mystery"},{"id":10749,"name":"Romance"},{"id":878,"name":"Science Fiction"},{"id":10770,"name":"TV Movie"},{"id":53,"name":"Thriller"},{"id":10752,"name":"War"},{"id":37,"name":"Western"}]');var p=document.querySelector(".library__container-list");function v(e){p.innerHTML=m(e)}var _=a("6QfM3"),g=(0,d.initializeApp)(f.firebaseConfig),h=(0,l.getDatabase)(g),y=(0,u.getAuth)(g);new(0,_.default)({queue:{},watched:{}});var b=new(0,o.API_service),w=document.querySelector(".js-watched"),x=document.querySelector(".js-queue"),L=document.querySelector(".library__container-list");function M(e){return T.apply(this,arguments)}function T(){return T=e(c)(e(s).mark((function n(t){var i;return e(s).wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,i=t.map(function(){var n=e(c)(e(s).mark((function n(t){return e(s).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b.id=t,e.next=3,b.fetchMovieById();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()),n.next=4,Promise.all(i);case 4:v(n.sent),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),console.log(n.t0);case 11:case"end":return n.stop()}}),n,null,[[0,8]])}))),T.apply(this,arguments)}x.addEventListener("click",(function(){if(x.classList.contains("is-active"))return;x.classList.add("is-active"),w.classList.remove("is-active"),(0,u.onAuthStateChanged)(y,(function(e){if(e){var n="users/".concat(e.uid,"/lib/queue/");(0,l.get)((0,l.ref)(h,n)).then((function(e){e.exists()?M(Object.keys(e.val())):(L.innerHTML="",addErrorStyles(),console.log("No data available"))})).catch((function(e){console.error(e)}))}}))})),w.addEventListener("click",(function(){if(w.classList.contains("current"))return;(0,u.onAuthStateChanged)(y,(function(e){if(e){var n="users/".concat(e.uid,"/lib/watched/");(0,l.get)((0,l.ref)(h,n)).then((function(e){e.exists()?M(Object.keys(e.val())):(L.innerHTML="",console.log("No data available"))})).catch((function(e){console.error(e)}))}})),w.classList.add("is-active"),x.classList.remove("is-active")}))}();
//# sourceMappingURL=library.ef1d4075.js.map
